<div class="admin-container">
  <div class="header-actions">
    <div>
      <h1>T√≤a nh√† c·ªßa t√¥i</h1>
      <p>Qu·∫£n l√Ω danh s√°ch c√°c khu nh√† tr·ªç ƒëang s·ªü h·ªØu</p>
    </div>
    <button class="btn-add" (click)="openAddModal()">+ Th√™m t√≤a nh√† m·ªõi</button>
  </div>

  <div class="building-grid">
    <div class="b-card" *ngFor="let b of buildings">
      <div class="b-content">
        <h3>{{ b.name }}</h3>
        <p class="addr">üìç {{ b.address }}, {{b.districtName}}, {{b.provinceName}}</p>
        <div class="b-actions">
          <button class="btn-outline" (click)="openEditModal(b)">Ch·ªânh s·ª≠a</button>
          <button class="btn-text danger" (click)="deleteBuilding(b.id)">X√≥a t√≤a nh√†</button>
          <button class="btn-text">Chi ti·∫øt ph√≤ng</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="isModalOpen">
    <div class="modal-card">
      <div class="modal-header">
        <h2>{{ isEditMode ? 'Ch·ªânh s·ª≠a t√≤a nh√†' : 'Th√™m t√≤a nh√† m·ªõi' }}</h2>
        <button (click)="isModalOpen = false">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>T√™n t√≤a nh√†</label>
          <input type="text" [(ngModel)]="buildingForm.name">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>T·ªânh/Th√†nh</label>
            <select [(ngModel)]="buildingForm.provinceCode" (change)="onProvinceChange()">
              <option [value]="null">-- Ch·ªçn T·ªânh --</option>
              <option *ngFor="let p of provinces" [value]="p.code">{{p.name}}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Qu·∫≠n/Huy·ªán</label>
            <select [(ngModel)]="buildingForm.districtCode" [disabled]="!districts.length">
              <option [value]="null">-- Ch·ªçn Huy·ªán --</option>
              <option *ngFor="let d of districts" [value]="d.code">{{d.name}}</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>ƒê·ªãa ch·ªâ chi ti·∫øt</label>
          <input type="text" [(ngModel)]="buildingForm.address">
        </div>
        <div class="form-group">
          <label>M√¥ t·∫£</label>
          <textarea [(ngModel)]="buildingForm.description" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="isModalOpen = false">H·ªßy</button>
        <button class="btn-save" (click)="saveBuilding()">L∆∞u l·∫°i</button>
      </div>
    </div>
  </div>
</div>