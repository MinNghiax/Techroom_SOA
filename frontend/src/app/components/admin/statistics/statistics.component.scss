/* Variables */
$primary: #3b82f6;
$success: #10b981;
$purple: #8b5cf6;
$orange: #f59e0b;
$gray-border: #e2e8f0;
$bg-color: #f8fafc;

.stats-wrapper {
  padding: 20px; /* Giảm padding từ 40px xuống 20px */
  max-width: 100%;
  font-family: 'Inter', 'Segoe UI', sans-serif;
  color: #1e293b;

  /* HEADER GỌN GÀNG */
  .stats-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid $gray-border;

    .title-box {
      h1 { font-size: 1.25rem; font-weight: 700; margin: 0; color: #0f172a; }
      p { font-size: 0.85rem; color: #64748b; margin: 2px 0 0; }
    }

    .btn-refresh-text {
      background: white; border: 1px solid $gray-border; padding: 6px 12px;
      border-radius: 6px; font-size: 0.85rem; font-weight: 600; color: #475569; cursor: pointer;
      display: flex; align-items: center; gap: 6px;
      transition: all 0.2s;
      &:hover { background: #f1f5f9; color: $primary; border-color: $primary; }
    }
  }

  /* 1. GRID CARDS RESPONSIVE (Tự động xuống dòng khi nhỏ) */
  .stats-grid {
    display: grid;
    /* Min 240px mỗi card, tự co giãn */
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
    gap: 15px;
    margin-bottom: 20px;

    .stat-card {
      background: white;
      padding: 15px 20px; /* Padding nhỏ lại */
      border-radius: 10px;
      border: 1px solid $gray-border;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
      display: flex;
      align-items: center;
      gap: 15px;
      transition: transform 0.2s;

      &:hover { transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0,0,0,0.05); }

      /* Icon bên trái */
      .card-icon {
        width: 45px; height: 45px; border-radius: 10px;
        display: flex; align-items: center; justify-content: center;
        font-size: 1.2rem; flex-shrink: 0;
      }

      .card-info {
        .card-label { font-size: 0.75rem; font-weight: 600; color: #64748b; text-transform: uppercase; }
        .card-value { font-size: 1.5rem; font-weight: 800; color: #0f172a; line-height: 1.2; margin: 2px 0; }
        .card-footer { font-size: 0.75rem; color: #94a3b8; }
      }

      /* Màu sắc riêng từng card */
      &.blue { .card-icon { background: #eff6ff; color: $primary; } border-left: 4px solid $primary; }
      &.green { .card-icon { background: #ecfdf5; color: $success; } border-left: 4px solid $success; }
      &.purple { .card-icon { background: #f5f3ff; color: $purple; } border-left: 4px solid $purple; }
      &.orange { .card-icon { background: #fffbeb; color: $orange; } border-left: 4px solid $orange; }
    }
  }

  /* 2. CHARTS LAYOUT (Chia 2 cột: 70% - 30%) */
  .charts-row {
    display: grid;
    grid-template-columns: 2fr 1fr; /* Cột trái to gấp đôi cột phải */
    gap: 15px;

    .chart-box {
      background: white;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid $gray-border;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);

      .box-header {
        margin-bottom: 10px;
        h3 { font-size: 1rem; font-weight: 700; margin: 0; color: #334155; }
      }

      /* QUAN TRỌNG: Cố định chiều cao biểu đồ để không bị vỡ */
      .chart-container {
        position: relative;
        height: 300px; /* Chiều cao cố định vừa phải */
        width: 100%;
      }

      /* Biểu đồ tròn nhỏ hơn xíu */
      &.side-chart .chart-container {
        height: 220px;
        display: flex; justify-content: center;
      }

      /* Legend tự chế cho đẹp */
      .custom-legend {
        display: flex; justify-content: center; gap: 15px; margin-top: 15px; flex-wrap: wrap;
        .item { 
          font-size: 0.8rem; display: flex; align-items: center; gap: 5px; color: #64748b;
          .dot { width: 8px; height: 8px; border-radius: 50%; display: block; }
          .dot.blue { background: $primary; }
          .dot.green { background: $success; }
          .dot.orange { background: $orange; }
        }
      }
    }
  }

  /* RESPONSIVE: Màn hình nhỏ (Tablet/Mobile) */
  @media (max-width: 992px) {
    .charts-row {
      grid-template-columns: 1fr; /* Chuyển thành 1 cột dọc */
    }
    .chart-box.main-chart .chart-container {
      height: 250px; /* Giảm chiều cao trên mobile */
    }
  }
}

.loading-container { text-align: center; padding: 50px; color: #64748b; font-size: 0.9rem; }