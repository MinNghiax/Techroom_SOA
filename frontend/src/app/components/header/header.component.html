<nav class="navbar">
  <div class="container">
    <a class="logo" 
       routerLink="/" 
       routerLinkActive="active" 
       [routerLinkActiveOptions]="{exact: true}">
      <span class="tech">TECH</span><span class="room">ROOM</span>
    </a>

    <ul class="nav-links">
      <li><a routerLink="/rooms" routerLinkActive="active">Tìm phòng</a></li>

      <!-- LANDLORD Menu -->
      <ng-container *ngIf="authService.getRole() === 'LANDLORD'">
        <li><a routerLink="/landlord/contract-management" routerLinkActive="active">Duyệt đặt phòng</a></li>
        <li><a routerLink="/landlord/manage-rooms" routerLinkActive="active">Quản lý phòng</a></li>
        <li><a routerLink="/landlord/manage-buildings" routerLinkActive="active">Tòa nhà của tôi</a></li>
        <li><a routerLink="/landlord/landlord-invoices" routerLinkActive="active">Quản lý Hóa đơn</a></li>
      </ng-container>

      <!-- ADMIN Menu -->
      <ng-container *ngIf="authService.getRole() === 'ADMIN'">
        <li><a routerLink="/admin/landlord-requests" routerLinkActive="active">Yêu cầu chủ trọ</a></li>
        <li><a routerLink="/admin/reports" routerLinkActive="active">Xử lý báo cáo</a></li>
        <li><a routerLink="/admin/users" routerLinkActive="active">Quản lý người dùng</a></li>
        <li><a routerLink="/admin/statistics" routerLinkActive="active">Thống kê</a></li>
      </ng-container>
    </ul>

    <div class="auth-section">
      <!-- Not Logged In -->
      <ng-container *ngIf="!authService.isAuthenticated()">
        <a routerLink="/login" class="btn-text">Đăng nhập</a>
        <a routerLink="/register" class="btn-primary">Đăng ký</a>
      </ng-container>

      <!-- Logged In -->
      <ng-container *ngIf="authService.isAuthenticated()">
        <div class="user-wrapper">
          <!-- User Dropdown -->
          <div class="user-dropdown">
            <button class="user-trigger" type="button">
              <div class="avatar-circle">{{ getFullName().charAt(0).toUpperCase() }}</div>
              <span class="user-name">{{ getFullName() }}</span>
              <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M4.427 6.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 6H4.604a.25.25 0 00-.177.427z"/>
              </svg>
            </button>

            <ul class="dropdown-menu">
              <!-- TENANT Dropdown Items -->
              <ng-container *ngIf="authService.getRole() === 'TENANT'">
                <li><a class="dropdown-item" routerLink="/landlord-request">Đăng ký chủ trọ</a></li>
                <li><a class="dropdown-item" routerLink="/tenant/my-bookings">Hợp đồng đã thuê</a></li>
                <li><a class="dropdown-item" routerLink="/tenant/tenant-invoices">Hóa đơn của tôi</a></li>
                <li class="divider"></li>
              </ng-container>

              <!-- Logout for all roles -->
              <li><a class="dropdown-item logout" (click)="onLogout()">Đăng xuất</a></li>
            </ul>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</nav>